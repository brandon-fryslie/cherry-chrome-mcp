# Sprint Plan: Dynamic MCP Tool Visibility (Simplified)
Generated: 2025-01-12

## Sprint Goal
Hide irrelevant tools when not connected to Chrome to reduce context overhead.

## Scope
**In scope (this sprint):**
- Two visibility states only: "not connected" (3 tools) vs "connected" (all tools)
- Send `list_changed` notification when connection state changes

**Explicitly out of scope:**
- Per-feature visibility (debugger enabled, paused states, etc.)
- Multiple granular tool categories
- Tool definition refactoring
- Debouncing
- Description updates

## Work Items

### P0: Implement Two-State Tool Visibility

**Acceptance Criteria:**
- [ ] When no connections exist: only 3 tools visible (`chrome_connect`, `chrome_launch`, `chrome_list_connections`)
- [ ] When at least one connection exists: all 23 tools visible
- [ ] Tool list updates automatically when first connection established
- [ ] Tool list updates automatically when last connection closed
- [ ] No TypeScript compilation errors

**Technical Approach:**
1. Modify `ListToolsRequestSchema` handler in `src/index.ts`:
   - Check `browserManager.hasConnections()`
   - Return subset (3 tools) or full list (23 tools)

2. Add `server.sendToolListChanged()` calls:
   - In `chromeConnect()` after successful connection
   - In `chromeLaunch()` after successful launch
   - In `chromeDisconnect()` when last connection closed

**Files Modified:**
- `src/index.ts` (ListToolsRequestSchema handler + tool functions)
- `src/tools/chrome.ts` (add notification calls)

**No new files needed** - simple enough to do inline.

## Dependencies
- MCP SDK `sendToolListChanged()` method (confirmed available)

## Risks
- **Low risk**: Simple boolean check, easy to test and rollback
- **Rollback**: Revert to always returning full tool list

## Timeline
**Estimated Effort:** 30 minutes
