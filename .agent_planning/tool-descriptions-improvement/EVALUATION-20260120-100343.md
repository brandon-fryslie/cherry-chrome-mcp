# EVALUATION: Tool Descriptions Improvement

**Topic:** Tool Descriptions Improvement
**Date:** 2026-01-20
**Analysis Timestamp:** 20260120-100343
**Verdict:** CONTINUE (Phased improvement needed)

---

## EXECUTIVE SUMMARY

Tool descriptions in cherry-chrome-mcp are **functionally adequate but structurally incomplete**. Critical information is missing:

- **Prerequisites:** Not documented (which tools must be called first)
- **State machine:** Debugger workflow undocumented
- **Output format:** Return values not explained
- **Error recovery:** No troubleshooting guidance
- **Tool relationships:** Workflow connections not shown

**Architectural Violation:** Current descriptions violate **GOALS MUST BE VERIFIABLE** - users cannot determine when tools are ready to use without external knowledge.

**Overall Quality Score:** 4.5/10

**Recommendation:** Implement 4-phase improvement plan focusing first on critical debugger tools.

---

## PART 1: WHAT EXISTS - Current State

### Tool Distribution (46 total descriptions)

**Legacy Tools (23):**
- Chrome Connection (5): chrome_connect, chrome_launch, chrome_list_connections, chrome_switch_connection, chrome_disconnect
- Target Management (2): list_targets, switch_target
- DOM Interaction (6): query_elements, click_element, fill_element, navigate, get_console_logs, inspect_element
- Debugger (11): debugger_enable, debugger_set_breakpoint, debugger_get_call_stack, debugger_evaluate_on_call_frame, debugger_step_over/into/out, debugger_resume, debugger_pause, debugger_remove_breakpoint, debugger_set_pause_on_exceptions

**Smart Consolidated Tools (17):**
- Chrome Connection (1): chrome (consolidates connect + launch)
- Connection Management (3): chrome_list_connections, chrome_switch_connection, chrome_disconnect
- Target Management (1): target (consolidates list + switch)
- DOM Interaction (6): Same as legacy
- Debugger (7): enable_debug_tools, breakpoint, step, execution, call_stack, evaluate, pause_on_exceptions

### Current Description Pattern

**What's Documented:**
- ✅ Tool purpose (1-2 sentences)
- ✅ Parameter descriptions (inline in inputSchema)
- ✅ Default values
- ✅ Basic constraints (e.g., max elements: 20)

**What's Missing:**
- ❌ Prerequisites (what tools must be called first)
- ❌ State machine documentation (debugger workflow)
- ❌ Output format (what the tool returns)
- ❌ Error conditions and recovery
- ❌ Related tools (workflow connections)
- ❌ Usage examples
- ❌ Action-parameter mapping (consolidated tools)

---

## PART 2: QUALITY ASSESSMENT BY CATEGORY

### Chrome Connection Tools (Score: 4/10)

| Tool | Length | Prerequisites? | Examples? | Issues |
|------|--------|---------------|-----------|--------|
| chrome_connect | 1 sentence | ❌ | ❌ | No multi-instance guidance |
| chrome | 1 sentence | ❌ | ❌ | Port vs debug_port unclear |
| chrome_list_connections | 1 sentence | ❌ | ❌ | Output format missing |

**Key Issues:**
- No guidance on multi-instance connections
- `connection_id` semantics not explained
- Error recovery missing

### DOM Interaction Tools (Score: 6/10)

| Tool | Quality | Prerequisites? | Output Format? | Location |
|------|---------|---------------|----------------|----------|
| query_elements | Good | ⚠️ Implicit | ⚠️ In CLAUDE.md | Descriptions + CLAUDE.md |
| click_element | Minimal | ⚠️ "Use query first" | ❌ | Descriptions |
| inspect_element | Good | ❌ | ❌ | Descriptions |

**Key Issues:**
- Heavy reliance on CLAUDE.md for examples
- `query_elements` output extensively documented in CLAUDE.md, not in description
- Relationship between inspect_element and query_elements unclear

### Debugger Tools (Score: 3/10) ⚠️ CRITICAL

| Tool | Prerequisite Doc? | State Dependency? | Output Format? |
|------|-----------------|------------------|-----------------|
| debugger_enable | ❌ | ❌ | ❌ |
| debugger_step_over | ⚠️ "paused only" | ❌ | ❌ |
| debugger_get_call_stack | ⚠️ "paused only" | ❌ | ⚠️ Partial |
| debugger_evaluate_on_call_frame | ⚠️ "paused" | ❌ | ❌ |

**Critical Issues:**
- **State machine not documented:** How does code become "paused"?
- **Workflow missing:** chrome → enable → breakpoint → pause → step/evaluate
- **call_frame_id undefined:** What is it? How to get it?
- **Output format missing:** What does call_stack return?

### Consolidated Tools (Smart Mode) (Score: 4/10)

| Tool | Consolidation Explained? | Action-Param Mapping? | Issues |
|------|------------------------|----------------------|--------|
| breakpoint | ✓ | ⚠️ Unclear | Which params for which action? |
| step | ✓ | ✓ Clear | Direction param well-explained |
| execution | ✓ | ✓ Clear | Action param clear |

**Key Issues:**
- `breakpoint` shows all params (url, line_number, breakpoint_id) without clearly stating which apply to action='set' vs action='remove'
- Parameter overlap confusing for new users

---

## PART 3: CRITICAL MISSING INFORMATION

### 1. Prerequisites Section (COMPLETELY MISSING)

**What's needed:**
```markdown
Prerequisites:
1. Connection required: chrome() or chrome_connect()
2. Debugger required: enable_debug_tools()
3. Paused required: execution('pause') or hit breakpoint
4. Context required: call_stack() to get call_frame_id
```

**Current state:** NO tools have prerequisites section

**Impact:** Users call tools in wrong order, get cryptic errors

### 2. Debugger State Machine (UNDOCUMENTED)

**Required workflow not documented anywhere:**
```
State: DISCONNECTED
  ↓ chrome()
State: CONNECTED
  ↓ enable_debug_tools()
State: DEBUGGER_ENABLED
  ↓ breakpoint(action='set')
Breakpoint stored
  ↓ User triggers code execution
State: PAUSED (at breakpoint)
  ↓ call_stack() → Get frames
  ↓ evaluate() → Inspect variables
  ↓ step(direction='over') → Advance execution
State: PAUSED (next frame)
  ↓ execution(action='resume')
State: RUNNING
```

**Current state:** Completely absent from descriptions

**Impact:** Users don't understand debugger lifecycle

### 3. Output Format (MISSING FOR MOST TOOLS)

**Example - call_stack (missing):**
```typescript
// What does it return?
Returns: Array of call frames
Format: [{
  callFrameId: string,
  functionName: string,
  location: { scriptId: string, lineNumber: number, columnNumber: number },
  scopeChain: [...],
  this: object
}]
```

**Current state:** Only `query_elements` has output documented (in CLAUDE.md)

**Impact:** Users can't verify tool success

### 4. Error Conditions and Recovery (MISSING)

**Example needed format:**
```markdown
Errors:
- "Debugger not enabled" → enable_debug_tools() not called → Call enable_debug_tools()
- "Execution not paused" → Code is running → Call execution('pause') first
- "Invalid selector" → CSS syntax error → Check syntax or use inspectElement
```

**Current state:** Generic error messages only

**Impact:** No troubleshooting guidance

### 5. Tool Relationships (PARTIALLY MISSING)

**Example needed:**
```markdown
Related tools:
- Use BEFORE: query_elements() to find element
- Use AFTER: Fill results with fill_element()
- Alternative: inspectElement() if selector unknown
```

**Current state:** Some hints in CLAUDE.md, not in descriptions

---

## PART 4: WHAT NEEDS CHANGES

### Phase 1: Critical (Debugger Tools - 18 tools)

**Priority:** CRITICAL - Blocks effective debugger use

**Tools:** All debugger tools (11 legacy + 7 smart)

**Changes:**
1. Add debugger state machine documentation to every debugger tool
2. Document prerequisites (must enable debugger, must be paused)
3. Add output format for call_stack, evaluate
4. Explain call_frame_id concept

**Effort:** 4-5 hours

### Phase 2: High Priority (Consolidated Tools - 5 tools)

**Priority:** HIGH - Blocks smart mode usability

**Tools:** chrome, target, breakpoint, step, execution

**Changes:**
1. Document action-parameter mappings clearly
2. Show which params apply to which action
3. Add examples for each action

**Effort:** 2-3 hours

### Phase 3: Important (Output Format - All Tools)

**Priority:** IMPORTANT - Improves usability

**Tools:** All 46 tools

**Changes:**
1. Add "Returns:" section to every tool
2. Document return value structure
3. Provide example output

**Effort:** 3-4 hours

### Phase 4: Polish (Examples and Error Recovery)

**Priority:** POLISH - Completes documentation

**Tools:** All 46 tools

**Changes:**
1. Add usage examples
2. Document error conditions
3. Add related tools section

**Effort:** 4-5 hours

---

## PART 5: STANDARD TEMPLATES

### Template 1: Standard Tool Description

```markdown
[One-line purpose statement.]

Prerequisites:
- [What state is required?]
- [What tools must be called first?]

Returns:
- Format: [Structure description]
- Example: [Sample output]

Related tools:
- Use BEFORE: [Tool] to [action]
- Use AFTER: [Tool] to [action]
- Alternative: [Tool] when [condition]

Errors:
- [Error message] → [Cause] → [Recovery]

Example:
[Scenario] → Call with [params] → Get [result]
```

### Template 2: Consolidated Tool Description

```markdown
[Purpose statement explaining consolidation.]

This tool consolidates [OldTool1] and [OldTool2].

Action: '[value1]'
  Prerequisites: [for this action]
  Parameters: [which params apply]
  Returns: [what this action returns]
  Example: [code example]

Action: '[value2]'
  Prerequisites: [for this action]
  Parameters: [which params apply]
  Returns: [what this action returns]
  Example: [code example]
```

### Template 3: Debugger State Machine

```markdown
Debugger Workflow:

1. chrome() → Establish connection
2. enable_debug_tools() → Enable CDP debugger
3. breakpoint(action='set') → Set breakpoint
4. [Code executes and hits breakpoint]
5. State: PAUSED
   ├─ call_stack() → Get execution frames
   ├─ evaluate() → Inspect variables
   └─ step() → Advance execution
6. execution(action='resume') → Continue execution
```

---

## PART 6: ARCHITECTURAL VIOLATIONS

### Violation 1: GOALS MUST BE VERIFIABLE

**Law:** "Goals must have well-defined, concrete criteria to gauge success or failure."

**Current violation:**
- User cannot determine if `debugger_step_over` is ready to use
- Description says "Only works when paused" but:
  - No way to verify paused state
  - No documented way to enter paused state
  - No error message guidance

**Required fix:** Every tool description must make success/failure criteria explicit

### Violation 2: ONE SOURCE OF TRUTH

**Law:** "Every concept has exactly one authoritative representation."

**Current violation:** Documentation split across:
1. Tool descriptions in src/index.ts
2. Implementation comments in src/tools/*.ts
3. CLAUDE.md extensive guide
4. Examples only in CLAUDE.md

**Required fix:** Tool descriptions must be complete; CLAUDE.md is supplementary

---

## PART 7: IMPLEMENTATION RECOMMENDATIONS

### Recommendation 1: Phased Improvement (REQUIRED)

**Phase 1 (Critical):** Debugger tools (4-5 hours)
- Add state machine documentation
- Document prerequisites
- Add output format

**Phase 2 (High):** Consolidated tools (2-3 hours)
- Document action-parameter mappings
- Add examples per action

**Phase 3 (Important):** Output format (3-4 hours)
- Add "Returns" section to all tools

**Phase 4 (Polish):** Examples and error recovery (4-5 hours)
- Add usage examples
- Document error conditions

**Total Effort:** 13-17 hours

### Recommendation 2: Create Documentation Standards (REQUIRED)

**Action:** Add "Tool Description Standards" section to CLAUDE.md

**Content:**
- Standard description template
- Consolidated tool template
- Debugger state machine diagram
- Documentation review checklist

### Recommendation 3: Consolidate Documentation Sources (MEDIUM PRIORITY)

**Action:** Move essential information from CLAUDE.md into tool descriptions

**Goal:** Tool descriptions are self-contained; CLAUDE.md is advanced reference

---

## PART 8: QUALITY SCORE SUMMARY

| Category | Tools | Current Score | Main Issues |
|----------|-------|--------------|-------------|
| Chrome Connection | 5 | 4/10 | No multi-instance guide, error recovery missing |
| Target Management | 3 | 5/10 | No output format, unclear matching logic |
| DOM Interaction | 6 | 6/10 | Output format in CLAUDE.md, no examples in descriptions |
| Debugger (Legacy) | 11 | 3/10 | **Missing state machine, unclear prerequisites** |
| Debugger (Smart) | 7 | 4/10 | **Action-param mapping unclear, same as legacy** |
| **Overall** | **46** | **4.5/10** | **Critical gaps in prerequisites, state machine, output format** |

---

## VERDICT: CONTINUE (Phased Improvement)

**Confidence Level:** HIGH (Clear improvement path)

**Recommendation:** Implement 4-phase improvement plan:
1. Phase 1 (Critical): Debugger tools - 4-5 hours
2. Phase 2 (High): Consolidated tools - 2-3 hours
3. Phase 3 (Important): Output format - 3-4 hours
4. Phase 4 (Polish): Examples and errors - 4-5 hours

**Total Effort:** 13-17 hours

**Expected Outcome:** Complete, self-contained tool descriptions that enable users to use tools effectively without external documentation.

---

**Evaluation Date:** 2026-01-20
**Timestamp:** 20260120-100343
**Evaluator:** Documentation Analysis
**Next Review:** After Phase 1 completion
