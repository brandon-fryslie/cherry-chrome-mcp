# Definition of Done: Python to TypeScript Port

Generated: 2026-01-12

## P0: Browser & Connection Management

- [ ] Can launch Chrome with `chrome_launch(port, headless, user_data_dir)`
- [ ] Can connect to existing Chrome with `chrome_connect(port, connection_id, host)`
- [ ] Can manage multiple connections with `chrome_list_connections()`, `chrome_switch_connection()`, `chrome_disconnect()`
- [ ] Active connection tracking with per-tool `connection_id` parameter support
- [ ] Platform-specific Chrome path detection (macOS, Linux, Windows)

## P1: Response Formatting

- [ ] MAX_RESULT_SIZE = 5000 chars (~1250 tokens)
- [ ] Oversized results rejected with deterministic analysis (suggest classes/IDs found)
- [ ] DOM elements show "ELIDED N CHILD ELEMENTS" when depth exceeded
- [ ] Error messages include context and potential fixes

## P2: DOM Interaction Tools

- [ ] `query_elements(selector, limit, max_depth)` returns elements with depth filtering (default 3, max 10)
- [ ] `click_element(selector, index)` clicks nth matching element with fallback
- [ ] `fill_element(selector, text, index, submit)` fills input and optionally submits
- [ ] `navigate(url)` navigates page and waits for load
- [ ] `get_console_logs(filter_level)` returns filtered console messages

## P3: Chrome Connection Tools

- [ ] `chrome_connect(port, connection_id, host)` connects to running Chrome
- [ ] `chrome_launch(debug_port, headless, user_data_dir, extra_args, connection_id)` launches Chrome
- [ ] `chrome_list_connections()` lists all connections with status
- [ ] `chrome_switch_connection(connection_id)` switches active connection
- [ ] `chrome_disconnect(connection_id)` disconnects and cleans up

## P4: Debugger Tools

- [ ] CDP client sends commands via `page._client.send()` with 10s timeout
- [ ] Event handling for `Debugger.paused` and `Debugger.resumed`
- [ ] `debugger_enable()` activates debugger domain
- [ ] `debugger_set_breakpoint(url, line, column, condition)` sets breakpoints (1-indexed line numbers)
- [ ] `debugger_get_call_stack()` returns call frames when paused
- [ ] `debugger_evaluate_on_call_frame(frame_id, expression)` evaluates in context
- [ ] All stepping tools work: `step_over`, `step_into`, `step_out`, `resume`, `pause`
- [ ] `debugger_remove_breakpoint()` and `debugger_set_pause_on_exceptions()` implemented
- [ ] Breakpoint tracking persisted per connection

## P5: Integration

- [ ] Server starts without errors: `npm run build && npm start`
- [ ] All 22 tools appear in `ListToolsRequestSchema` response
- [ ] Tool schemas match Python signatures (same parameter names and types)
- [ ] All tools return compact, semantic responses (not [STUB])
